import{j as e}from"./index-akJh1a2u.js";import{P as b}from"./index-C7VwecpD.js";import{D as y,p as g}from"./index-CkzAM18b.js";import{p as I}from"./persian-OLrIT8M7.js";/* empty css               */import{r as o}from"./vendor-core-CiUIJZ_7.js";import{e as t,B as k,F as D,M as S,I as r,S as x}from"./vendor-ui-DnFwFa5O.js";import"./vendor-utils-IiNHtr66.js";const{Option:m}=x,u=[{title:"ردیف",dataIndex:"radif",key:"radif"},{title:"مبلغ برگشتی",dataIndex:"amount",key:"amount"},{title:"عامل خرید",dataIndex:"agent",key:"agent"},{title:"مدر",dataIndex:"doc",key:"doc"},{title:"یگان",dataIndex:"unit",key:"unit"},{title:"تاریخ سند",dataIndex:"date",key:"date"},{title:"نوع برگشتی",dataIndex:"type",key:"type"}],O=({selectedRow:s})=>{const[l,p]=o.useState([]),[h,n]=o.useState(!1),[d]=t.useForm(),c=o.useRef(null),j=a=>{const i=a.date?.format("YYYY/MM/DD");p(f=>[...f,{...a,date:i,key:Date.now()}]),n(!1),d.resetFields()};return e.jsxs("div",{className:"bg-muted/30 border rounded-xl shadow-sm p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-base text-gray-700",children:"لیست اسناد برگشتی"}),e.jsx(k,{type:"primary",onClick:()=>n(!0),children:"افزودن سند برگشتی"})]}),e.jsx(b,{dataExcel:{data:l,nameFile:`لیست اسناد برگشتی ${s?.program||""}`,nameSheet:s?.program||"",columns:u},dataPrint:{idSelcted:c.current,name:`لیست اسناد برگشتی ${s?.program||""}`}}),e.jsxs("div",{ref:c,className:"w-full",children:[e.jsx(D,{rowKey:a=>a.key,size:"small",columns:u,dataSource:l,pagination:!1,className:"bg-white rounded-xl shadow-sm border [&_.ant-table-thead_th]:bg-gray-100 [&_.ant-table-cell]:text-right"}),e.jsxs("div",{className:"text-sm font-semibold text-right pt-2 border-t mt-2",children:["جمع کل مبلغ برگشتی: ",l.reduce((a,i)=>a+Number(i.amount||0),0).toLocaleString()," ریال"]})]}),e.jsx(S,{title:"افزودن سند برگشتی",open:h,onCancel:()=>n(!1),onOk:()=>d.submit(),okText:"افزودن",cancelText:"انصراف",children:e.jsxs(t,{layout:"vertical",form:d,onFinish:j,children:[e.jsx(t.Item,{name:"radif",label:"ردیف",rules:[{required:!0}],children:e.jsx(r,{})}),e.jsx(t.Item,{name:"amount",label:"مبلغ برگشتی",rules:[{required:!0}],children:e.jsx(r,{type:"number"})}),e.jsx(t.Item,{name:"agent",label:"عامل خرید",rules:[{required:!0}],children:e.jsx(r,{})}),e.jsx(t.Item,{name:"doc",label:"مدر",rules:[{required:!0}],children:e.jsx(r,{})}),e.jsx(t.Item,{name:"unit",label:"یگان",rules:[{required:!0}],children:e.jsx(r,{})}),e.jsx(t.Item,{name:"date",label:"تاریخ سند",rules:[{required:!0,message:"انتخاب تاریخ الزامی است"}],children:e.jsx(y,{calendar:I,locale:g,format:"YYYY/MM/DD",placeholder:"تاریخ را انتخاب کنید",className:"w-full",calendarPosition:"bottom-right"})}),e.jsx(t.Item,{name:"type",label:"نوع برگشتی",rules:[{required:!0}],children:e.jsxs(x,{children:[e.jsx(m,{value:"نوع ۱",children:"نوع ۱"}),e.jsx(m,{value:"نوع ۲",children:"نوع ۲"}),e.jsx(m,{value:"نوع ۳",children:"نوع ۳"})]})})]})})]})};export{O as default};
