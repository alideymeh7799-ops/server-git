import{j as d,am as w,ah as f,aC as C,az as v,o as A}from"./index-akJh1a2u.js";import{r as i}from"./vendor-core-CiUIJZ_7.js";import{r as R}from"./vendor-utils-IiNHtr66.js";var _=R();function j(){return _.useSyncExternalStore(y,()=>!0,()=>!1)}function y(){return()=>{}}var m="Avatar",[N,H]=w(m),[b,S]=N(m),L=i.forwardRef((a,t)=>{const{__scopeAvatar:n,...r}=a,[o,e]=i.useState("idle");return d.jsx(b,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:e,children:d.jsx(f.span,{...r,ref:t})})});L.displayName=m;var x="AvatarImage",E=i.forwardRef((a,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...e}=a,c=S(x,n),s=M(r,e),u=C(l=>{o(l),c.onImageLoadingStatusChange(l)});return v(()=>{s!=="idle"&&u(s)},[s,u]),s==="loaded"?d.jsx(f.img,{...e,ref:t,src:r}):null});E.displayName=x;var h="AvatarFallback",k=i.forwardRef((a,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=a,e=S(h,n),[c,s]=i.useState(r===void 0);return i.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(u)}},[r]),c&&e.imageLoadingStatus!=="loaded"?d.jsx(f.span,{...o,ref:t}):null});k.displayName=h;function p(a,t){return a?t?(a.src!==t&&(a.src=t),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function M(a,{referrerPolicy:t,crossOrigin:n}){const r=j(),o=i.useRef(null),e=r?(o.current||(o.current=new window.Image),o.current):null,[c,s]=i.useState(()=>p(e,a));return v(()=>{s(p(e,a))},[e,a]),v(()=>{const u=I=>()=>{s(I)};if(!e)return;const l=u("loaded"),g=u("error");return e.addEventListener("load",l),e.addEventListener("error",g),t&&(e.referrerPolicy=t),typeof n=="string"&&(e.crossOrigin=n),()=>{e.removeEventListener("load",l),e.removeEventListener("error",g)}},[e,n,t]),c}var P=L,z=E;function $({className:a,...t}){return d.jsx(P,{"data-slot":"avatar",className:A("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...t})}function B({className:a,...t}){return d.jsx(z,{"data-slot":"avatar-image",className:A("aspect-square size-full",a),...t})}export{$ as A,B as a};
