import{p as Z,j as e,am as ee,ar as ne,ah as P,al as ae,ao as q,aq as T,as as se,at as te,o as U,i as oe,aP as re,k as ie,aQ as C,m as I,J as ce,B as _,I as j,s as F}from"./index-akJh1a2u.js";import"./vendor-utils-IiNHtr66.js";import{u as me,s as de}from"./use-request-D0F366jR.js";import{r as l,j as le}from"./vendor-core-CiUIJZ_7.js";import{C as pe}from"./check-CYoWhRsC.js";import{F as ue,a as z,b as A,e as B,c as D,d as L}from"./form-Cjy9Qfuo.js";import{I as M}from"./input-DybMe5F1.js";import{u as he}from"./index.esm-BGUB25Qb.js";import"./vendor-ui-DnFwFa5O.js";const ge=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ye=Z("loader-circle",ge);var w="Checkbox",[be,Te]=ee(w),[fe,S]=be(w);function ve(s){const{__scopeCheckbox:m,checked:n,children:u,defaultChecked:r,disabled:a,form:g,name:h,onCheckedChange:p,required:y,value:b="on",internal_do_not_use_render:i}=s,[d,k]=ae({prop:n,defaultProp:r??!1,onChange:p,caller:w}),[f,v]=l.useState(null),[o,t]=l.useState(null),c=l.useRef(!1),E=f?!!g||!!f.closest("form"):!0,N={checked:d,disabled:a,setChecked:k,control:f,setControl:v,name:h,form:g,value:b,hasConsumerStoppedPropagationRef:c,required:y,defaultChecked:x(r)?!1:r,isFormControl:E,bubbleInput:o,setBubbleInput:t};return e.jsx(fe,{scope:m,...N,children:_e(i)?i(N):u})}var G="CheckboxTrigger",H=l.forwardRef(({__scopeCheckbox:s,onKeyDown:m,onClick:n,...u},r)=>{const{control:a,value:g,disabled:h,checked:p,required:y,setControl:b,setChecked:i,hasConsumerStoppedPropagationRef:d,isFormControl:k,bubbleInput:f}=S(G,s),v=q(r,b),o=l.useRef(p);return l.useEffect(()=>{const t=a?.form;if(t){const c=()=>i(o.current);return t.addEventListener("reset",c),()=>t.removeEventListener("reset",c)}},[a,i]),e.jsx(P.button,{type:"button",role:"checkbox","aria-checked":x(p)?"mixed":p,"aria-required":y,"data-state":X(p),"data-disabled":h?"":void 0,disabled:h,value:g,...u,ref:v,onKeyDown:T(m,t=>{t.key==="Enter"&&t.preventDefault()}),onClick:T(n,t=>{i(c=>x(c)?!0:!c),f&&k&&(d.current=t.isPropagationStopped(),d.current||t.stopPropagation())})})});H.displayName=G;var V=l.forwardRef((s,m)=>{const{__scopeCheckbox:n,name:u,checked:r,defaultChecked:a,required:g,disabled:h,value:p,onCheckedChange:y,form:b,...i}=s;return e.jsx(ve,{__scopeCheckbox:n,checked:r,defaultChecked:a,disabled:h,required:g,onCheckedChange:y,name:u,form:b,value:p,internal_do_not_use_render:({isFormControl:d})=>e.jsxs(e.Fragment,{children:[e.jsx(H,{...i,ref:m,__scopeCheckbox:n}),d&&e.jsx(Q,{__scopeCheckbox:n})]})})});V.displayName=w;var W="CheckboxIndicator",J=l.forwardRef((s,m)=>{const{__scopeCheckbox:n,forceMount:u,...r}=s,a=S(W,n);return e.jsx(ne,{present:u||x(a.checked)||a.checked===!0,children:e.jsx(P.span,{"data-state":X(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:m,style:{pointerEvents:"none",...s.style}})})});J.displayName=W;var K="CheckboxBubbleInput",Q=l.forwardRef(({__scopeCheckbox:s,...m},n)=>{const{control:u,hasConsumerStoppedPropagationRef:r,checked:a,defaultChecked:g,required:h,disabled:p,name:y,value:b,form:i,bubbleInput:d,setBubbleInput:k}=S(K,s),f=q(n,k),v=se(a),o=te(u);l.useEffect(()=>{const c=d;if(!c)return;const E=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(E,"checked").set,$=!r.current;if(v!==a&&R){const Y=new Event("click",{bubbles:$});c.indeterminate=x(a),R.call(c,x(a)?!1:a),c.dispatchEvent(Y)}},[d,v,a,r]);const t=l.useRef(x(a)?!1:a);return e.jsx(P.input,{type:"checkbox","aria-hidden":!0,defaultChecked:g??t.current,required:h,disabled:p,name:y,value:b,form:i,...m,tabIndex:-1,ref:f,style:{...m.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Q.displayName=K;function _e(s){return typeof s=="function"}function x(s){return s==="indeterminate"}function X(s){return x(s)?"indeterminate":s?"checked":"unchecked"}function xe({className:s,...m}){return e.jsx(V,{"data-slot":"checkbox",className:U("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...m,children:e.jsx(J,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(pe,{className:"size-3.5"})})})}const ke={VITE_APP_HOMEPAGE:"/workbench"},{VITE_APP_HOMEPAGE:O}=ke;function Fe({className:s,...m}){const{t:n}=oe(),[u,r]=l.useState(!1),[a,g]=l.useState(!0),h=le(),{setUserToken:p,setUserInfo:y}=re(),{loginState:b,setLoginState:i}=ie(),d=he({defaultValues:{username:C[0].username,password:C[0].password}});if(b!==I.LOGIN)return null;const k=me().usePostData("/auth/login",{"content-type":"application/json"}),f=ce(o=>o.setProfile),v=async o=>{r(!0);try{const t=await k.sendData(o);if(t.success){F.success(t.message,{closeButton:!0});const c={...t.data,loginTimestamp:new Date().getTime()};localStorage.setItem("user-profile",JSON.stringify(c)),f(c),de("token-data",t.credentials.access_token),h(O,{replace:!0})}else F.success("Sign in success!",{closeButton:!0}),p({accessToken:"b293ebe9-87b2-472d-9d11-8504e3f9939a",refreshToken:"df6f5b7c-7fcb-4101-b33c-4ad412d6f5aa"}),y({id:"user_admin_id",username:"admin",avatar:"https://avatars.githubusercontent.com/u/91092347",email:"admin@slash.com",roles:[{id:"role_admin_id",name:"admin",code:"SUPER_ADMIN"}],permissions:[{id:"permission_create",name:"permission-create",code:"permission:create"},{id:"permission_read",name:"permission-read",code:"permission:read"},{id:"permission_update",name:"permission-update",code:"permission:update"},{id:"permission_delete",name:"permission-delete",code:"permission:delete"}],menu:[{id:"group_dashboard",name:"sys.nav.dashboard",code:"dashboard",parentId:"",type:0,children:[{id:"workbench",parentId:"group_dashboard",name:"sys.nav.workbench",code:"workbench",icon:"local:ic-workbench",type:2,path:"/workbench",component:"/pages/dashboard/workbench",children:[]},{id:"analysis",parentId:"group_dashboard",name:"sys.nav.analysis",code:"analysis",icon:"local:ic-analysis",type:2,path:"/analysis",component:"/pages/dashboard/analysis",children:[]}]},{id:"group_pages",name:"sys.nav.pages",code:"pages",parentId:"",type:0,children:[{id:"management",parentId:"group_pages",name:"sys.nav.management",code:"management",icon:"local:ic-management",type:1,path:"/management",children:[{id:"management_user",parentId:"management",name:"sys.nav.user.index",code:"management:user",type:1,path:"/management/user",children:[{id:"management_user_profile",parentId:"management_user",name:"sys.nav.user.profile",code:"management:user:profile",type:2,path:"management/user/profile",component:"/pages/management/user/profile",children:[]},{id:"management_user_account",parentId:"management_user",name:"sys.nav.user.account",code:"management:user:account",type:2,path:"management/user/account",component:"/pages/management/user/account",children:[]}]},{id:"management_system",parentId:"management",name:"sys.nav.system.index",code:"management:system",type:1,path:"management/system",children:[{id:"management_system_user",parentId:"management_system",name:"sys.nav.system.user",code:"management:system:user",type:2,path:"/management/system/user",component:"/pages/management/system/user",children:[]},{id:"management_system_role",parentId:"management_system",name:"sys.nav.system.role",code:"management:system:role",type:2,path:"/management/system/role",component:"/pages/management/system/role",children:[]},{id:"management_system_permission",parentId:"management_system",name:"sys.nav.system.permission",code:"management:system:permission",type:2,path:"/management/system/permission",component:"/pages/management/system/permission",children:[]},{id:"management_system_amele-kharid",parentId:"management_system",name:"عاملین خرید",code:"management:system:amele-kharid",type:2,path:"/management/system/amele-kharid",component:"/pages/management/system/amele-kharid",children:[]},{id:"management_system_yegan",parentId:"management_system",name:"sys.nav.system.yegan",code:"management:system:yegan",type:2,path:"/management/system/yegan",component:"/pages/management/system/yegan",children:[]},{id:"management_system_yegan",parentId:"management_system",name:"sys.nav.system.yegan",code:"management:system:yegan",type:2,path:"/management/system/yegan",component:"/pages/management/system/yegan",children:[]},{id:"management_system_amele-kharid",parentId:"management_system",name:"sys.nav.system.amele-kharid",code:"management:system:amele-kharid",type:2,path:"/management/system/amele-kharid",component:"/pages/management/system/amele-kharid",children:[]}]}]},{id:"menulevel",parentId:"group_pages",name:"sys.nav.menulevel.index",code:"menulevel",icon:"local:ic-menulevel",type:1,path:"/menu_level",children:[{id:"menulevel_1b",parentId:"menulevel",name:"sys.nav.menulevel.1b.index",code:"menulevel:1b",type:1,path:"/menu_level/1b",component:"/pages/menu-level/menu-level-1b",children:[{id:"menulevel_1b_2a",parentId:"menulevel_1b",name:"sys.nav.menulevel.1b.2a",code:"menulevel:1b:2a",type:2,path:"/menu_level/1b/2a",component:"/pages/menu-level/menu-level-1b/menu-level-2a",children:[]},{id:"menulevel_1b_2b",parentId:"menulevel_1b",name:"sys.nav.menulevel.1b.2b.index",code:"menulevel:1b:2b",type:1,path:"/menu_level/1b/2b",children:[{id:"menulevel_1b_2b_3a",parentId:"menulevel_1b_2b",name:"sys.nav.menulevel.1b.2b.3a",code:"menulevel:1b:2b:3a",type:2,path:"/menu_level/1b/2b/3a",component:"/pages/menu-level/menu-level-1b/menu-level-2b/menu-level-3a",children:[]},{id:"menulevel_1b_2b_3b",parentId:"menulevel_1b_2b",name:"sys.nav.menulevel.1b.2b.3b",code:"menulevel:1b:2b:3b",type:2,path:"/menu_level/1b/2b/3b",component:"/pages/menu-level/menu-level-1b/menu-level-2b/menu-level-3b",children:[]}]}]}]},{id:"error",parentId:"group_pages",name:"sys.nav.error.index",code:"error",icon:"bxs:error-alt",type:1,path:"/error",children:[{id:"error_403",parentId:"error",name:"sys.nav.error.403",code:"error:403",type:2,path:"/error/403",component:"/pages/sys/error/Page403",children:[]},{id:"error_404",parentId:"error",name:"sys.nav.error.404",code:"error:404",type:2,path:"/error/404",component:"/pages/sys/error/Page404",children:[]},{id:"error_500",parentId:"error",name:"sys.nav.error.500",code:"error:500",type:2,path:"/error/500",component:"/pages/sys/error/Page500",children:[]}]}]},{id:"group_ui",name:"sys.nav.ui",code:"ui",parentId:"",type:0,children:[{id:"components",parentId:"group_ui",name:"sys.nav.components",code:"components",icon:"solar:widget-5-bold-duotone",type:1,path:"/components",caption:"sys.nav.custom_ui_components",children:[{id:"components_icon",parentId:"components",name:"sys.nav.icon",code:"components:icon",type:2,path:"/components/icon",component:"/pages/components/icon",children:[]},{id:"components_animate",parentId:"components",name:"sys.nav.animate",code:"components:animate",type:2,path:"/components/animate",component:"/pages/components/animate",children:[]},{id:"components_scroll",parentId:"components",name:"sys.nav.scroll",code:"components:scroll",type:2,path:"/components/scroll",component:"/pages/components/scroll",children:[]},{id:"components_i18n",parentId:"components",name:"sys.nav.i18n",code:"components:i18n",type:2,path:"/components/multi-language",component:"/pages/components/multi-language",children:[]},{id:"components_upload",parentId:"components",name:"sys.nav.upload",code:"components:upload",type:2,path:"/components/upload",component:"/pages/components/upload",children:[]},{id:"components_chart",parentId:"components",name:"sys.nav.chart",code:"components:chart",type:2,path:"/components/chart",component:"/pages/components/chart",children:[]},{id:"components_toast",parentId:"components",name:"sys.nav.toast",code:"components:toast",type:2,path:"/components/toast",component:"/pages/components/toast",children:[]}]},{id:"functions",parentId:"group_ui",name:"sys.nav.functions",code:"functions",icon:"solar:plain-2-bold-duotone",type:1,path:"/functions",children:[{id:"functions_clipboard",parentId:"functions",name:"sys.nav.clipboard",code:"functions:clipboard",type:2,path:"/functions/clipboard",component:"/pages/functions/clipboard",children:[]},{id:"functions_tokenExpired",parentId:"functions",name:"sys.nav.token_expired",code:"functions:token_expired",type:2,path:"/functions/token_expired",component:"/pages/functions/token-expired",children:[]}]}]},{id:"group_others",name:"sys.nav.others",code:"others",parentId:"",type:0,children:[{id:"permission",parentId:"group_others",name:"sys.nav.permission",code:"permission",icon:"mingcute:safe-lock-fill",type:2,path:"/permission",component:"/pages/sys/others/permission",children:[]},{id:"permission_page_test",parentId:"group_others",name:"sys.nav.permission.page_test",code:"permission:page_test",icon:"mingcute:safe-lock-fill",type:2,path:"/permission/page-test",component:"/pages/sys/others/permission/page-test",auth:["permission:read"],hidden:!0,children:[]},{id:"calendar",parentId:"group_others",name:"sys.nav.calendar",code:"calendar",icon:"solar:calendar-bold-duotone",type:2,path:"/calendar",info:"12",component:"/pages/sys/others/calendar",children:[]},{id:"kanban",parentId:"group_others",name:"sys.nav.kanban",code:"kanban",icon:"solar:clipboard-bold-duotone",type:2,path:"/kanban",component:"/pages/sys/others/kanban",children:[]},{id:"disabled",parentId:"group_others",name:"sys.nav.disabled",code:"disabled",icon:"local:ic-disabled",type:2,path:"/disabled",disabled:!0,component:"/pages/sys/others/disabled",children:[]},{id:"label",parentId:"group_others",name:"sys.nav.label",code:"label",icon:"local:ic-label",type:2,path:"#label",info:"New",children:[]},{id:"link",parentId:"group_others",name:"sys.nav.link",code:"link",icon:"local:ic-external",type:1,path:"/link",children:[{id:"link_external",parentId:"link",name:"sys.nav.external_link",code:"link:external_link",type:2,path:"/link/external_link",component:"/pages/sys/others/link/external-link",children:[]},{id:"link_iframe",parentId:"link",name:"sys.nav.iframe",code:"link:iframe",type:2,path:"/link/iframe",component:"/pages/sys/others/link/iframe",children:[]}]},{id:"blank",parentId:"group_others",name:"sys.nav.blank",code:"blank",icon:"local:ic-blank",type:2,path:"/blank",component:"/pages/sys/others/blank",children:[]}]}]}),h(O,{replace:!0})}finally{r(!1)}};return e.jsx("div",{className:U("flex flex-col gap-6",s),children:e.jsx(ue,{...d,...m,children:e.jsxs("form",{onSubmit:d.handleSubmit(v),className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:n("sys.login.signInFormTitle")}),e.jsx("p",{className:"text-balance text-sm text-muted-foreground",children:n("sys.login.signInFormDescription")})]}),e.jsx(z,{control:d.control,name:"username",rules:{required:n("sys.login.accountPlaceholder")},render:({field:o})=>e.jsxs(A,{children:[e.jsx(B,{children:n("sys.login.userName")}),e.jsx(D,{children:e.jsx(M,{placeholder:C.map(t=>t.username).join("/"),...o})}),e.jsx(L,{})]})}),e.jsx(z,{control:d.control,name:"password",rules:{required:n("sys.login.passwordPlaceholder")},render:({field:o})=>e.jsxs(A,{children:[e.jsx(B,{children:n("sys.login.password")}),e.jsx(D,{children:e.jsx(M,{type:"password",placeholder:C[0].password,...o,suppressHydrationWarning:!0})}),e.jsx(L,{})]})}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"remember",checked:a,onCheckedChange:o=>g(o==="indeterminate"?!1:o)}),e.jsx("label",{htmlFor:"remember",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:n("sys.login.rememberMe")})]}),e.jsx(_,{variant:"link",onClick:()=>i(I.RESET_PASSWORD),size:"sm",children:n("sys.login.forgetPassword")})]}),e.jsxs(_,{type:"submit",className:"w-full text-white cursor-pointer",children:[u&&e.jsx(ye,{className:"animate-spin mr-2"}),n("sys.login.loginButton")]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs(_,{variant:"outline",className:"w-full",onClick:()=>i(I.MOBILE),children:[e.jsx(j,{icon:"uil:mobile-android",size:20}),n("sys.login.mobileSignInFormTitle")]}),e.jsxs(_,{variant:"outline",className:"w-full",onClick:()=>i(I.QR_CODE),children:[e.jsx(j,{icon:"uil:qrcode-scan",size:20}),n("sys.login.qrSignInFormTitle")]})]}),e.jsx("div",{className:"relative text-center text-sm after:absolute after:inset-0 after:top-1/2 after:z-0 after:flex after:items-center after:border-t after:border-border",children:e.jsx("span",{className:"relative z-10 bg-background px-2 text-muted-foreground",children:n("sys.login.otherSignIn")})}),e.jsxs("div",{className:"flex cursor-pointer justify-around text-2xl",children:[e.jsx(_,{variant:"ghost",size:"icon",children:e.jsx(j,{icon:"mdi:github",size:24})}),e.jsx(_,{variant:"ghost",size:"icon",children:e.jsx(j,{icon:"mdi:wechat",size:24})}),e.jsx(_,{variant:"ghost",size:"icon",children:e.jsx(j,{icon:"ant-design:google-circle-filled",size:24})})]}),e.jsxs("div",{className:"text-center text-sm",children:[n("sys.login.noAccount"),e.jsx(_,{variant:"link",className:"px-1",onClick:()=>i(I.REGISTER),children:n("sys.login.signUpFormTitle")})]})]})})})}export{Fe as LoginForm,Fe as default};
