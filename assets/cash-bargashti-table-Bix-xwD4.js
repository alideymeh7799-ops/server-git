import{j as e}from"./index-Bt7t-uRm.js";import{P as I}from"./index-Bs42488N.js";import{r as i}from"./vendor-core-CiUIJZ_7.js";import{p as g}from"./persian-OLrIT8M7.js";import{D as k,p as w}from"./index-CkzAM18b.js";import{e as t,B as D,F as M,M as N,I as r,S as x}from"./vendor-ui-DnFwFa5O.js";import"./vendor-utils-IiNHtr66.js";const{Option:m}=x,u=[{title:"ردیف",dataIndex:"radif",key:"radif"},{title:"مبلغ پرداختی",dataIndex:"amount",key:"amount"},{title:"نوع پرداخت",dataIndex:"type",key:"type"},{title:"شرح سند",dataIndex:"desc",key:"desc"},{title:"تاریخ سند",dataIndex:"date",key:"date"},{title:"شماره حساب",dataIndex:"account",key:"account"},{title:"نام و نشان",dataIndex:"owner",key:"owner"}],O=({selectedRow:s})=>{const c=i.useRef(null),[l,h]=i.useState([]),[p,n]=i.useState(!1),[d]=t.useForm(),j=a=>{const o=a.date?.format("YYYY/MM/DD"),b={...a,date:o,key:Date.now()};h(y=>[...y,b]),n(!1),d.resetFields()},f=l.reduce((a,o)=>a+Number(o.amount||0),0);return e.jsxs("div",{className:"bg-muted/30 border rounded-xl shadow-sm p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-base text-gray-700",children:"لیست اسناد نقد پرداخت"}),e.jsx(D,{type:"primary",onClick:()=>n(!0),children:"افزودن اعلامیه برگشتی"})]}),e.jsx(I,{dataExcel:{data:l,nameFile:`اسناد نقد پرداخت ${s?.program||""}`,nameSheet:s?.program||"",columns:u},dataPrint:{idSelcted:c.current,name:`اسناد نقد پرداخت ${s?.program||""}`}}),e.jsxs("div",{ref:c,className:"w-full",children:[e.jsx(M,{rowKey:a=>a.key,size:"small",columns:u,dataSource:l,pagination:!1,className:"bg-white rounded-xl shadow-sm border [&_.ant-table-thead_th]:bg-gray-100 [&_.ant-table-cell]:text-right"}),e.jsxs("div",{className:"text-sm font-semibold text-right pt-2 border-t mt-2",children:["جمع کل نقد پرداخت: ",f.toLocaleString()," ریال"]})]}),e.jsx(N,{title:"افزودن اعلامیه برگشتی نقدی",open:p,onCancel:()=>n(!1),onOk:()=>d.submit(),okText:"افزودن",cancelText:"انصراف",children:e.jsxs(t,{layout:"vertical",form:d,onFinish:j,children:[e.jsx(t.Item,{name:"radif",label:"ردیف",rules:[{required:!0}],children:e.jsx(r,{})}),e.jsx(t.Item,{name:"amount",label:"مبلغ پرداختی",rules:[{required:!0}],children:e.jsx(r,{type:"number"})}),e.jsx(t.Item,{name:"type",label:"نوع پرداخت",rules:[{required:!0}],children:e.jsxs(x,{children:[e.jsx(m,{value:"نقدی",children:"نقدی"}),e.jsx(m,{value:"کارت",children:"کارت"}),e.jsx(m,{value:"سایر",children:"سایر"})]})}),e.jsx(t.Item,{name:"desc",label:"شرح سند",rules:[{required:!0}],children:e.jsx(r.TextArea,{rows:2})}),e.jsx(t.Item,{name:"date",label:"تاریخ سند",rules:[{required:!0}],children:e.jsx(k,{calendar:g,locale:w,format:"YYYY/MM/DD",className:"w-full",placeholder:"انتخاب تاریخ"})}),e.jsx(t.Item,{name:"account",label:"شماره حساب",rules:[{required:!0}],children:e.jsx(r,{})}),e.jsx(t.Item,{name:"owner",label:"نام و نشان",rules:[{required:!0}],children:e.jsx(r,{})})]})})]})};export{O as default};
