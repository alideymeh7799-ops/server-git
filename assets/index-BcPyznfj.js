import{j as e,D as _,E as G,F as U,G as V,K as h,H as K,B as w,C as z,d as E,a3 as J,e as L,w as Q}from"./index-akJh1a2u.js";import{u as W}from"./user-Broof_Gn.js";import{I as F,S,F as A}from"./vendor-ui-DnFwFa5O.js";import{g as $,r as g}from"./vendor-core-CiUIJZ_7.js";import{F as X,a as p,b as o,e as c,c as m,d as j,L as R}from"./form-Cjy9Qfuo.js";import{I as b}from"./input-DybMe5F1.js";import{R as Z,a as B}from"./radio-group-4JBy0wZ6.js";import{S as ee,a as ae,b as se,c as te,d as I}from"./select-jzxhk6QA.js";import{D as M,p as Y}from"./index-CkzAM18b.js";import{u as re}from"./index.esm-BGUB25Qb.js";import"./vendor-utils-IiNHtr66.js";import"./check-CYoWhRsC.js";const le=[{id:2,title:"نام",value:"name"},{id:0,title:"نام خانوادگی",value:"family"},{title:"کد ملی",dataIndex:"nationalId",id:4},{title:"شماره پرسنلی",dataIndex:"personnelNumber",id:4},{title:"شماره تماس",dataIndex:"phoneNumber",id:6}],ne=[{id:2,title:"نام",value:"name"},{id:0,title:"نام خانوادگی",value:"family"},{title:"کد ملی",dataIndex:"nationalId",id:4},{title:"شماره پرسنلی",dataIndex:"personnelNumber",id:4},{title:"شماره تماس",dataIndex:"phoneNumber",id:6},{title:" نام کاربری",dataIndex:"username",id:6}];var y,P;function ie(){if(P)return y;P=1;function u(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var x=u({name:"jalali",startYear:1,yearLength:365,epoch:1948319,century:14,weekStartDayIndex:0,getMonthLengths:a=>[31,31,31,31,31,31,30,30,30,30,30,a?30:29],isLeap:a=>(a+12)%33%4==1,getLeaps(a){if(a===0)return;let r=a>0?1:-1,n=[];for(;a>0?r<=a:a<=r;)this.isLeap(r)&&n.push(r),a>0?r++:r--;return n},getDayOfYear:({month:{index:a},day:r})=>(a<=6?31*a:186+30*(a-6))+r,getAllDays(a){const{year:r}=a;return this.yearLength*(r-1)+this.leapsLength(r)+this.getDayOfYear(a)},leapsLength(a){return(682*(474+((r=a-474)-(n=2820)*(r/n|0)))-110)/2816|0;var r,n},guessYear:(a,r)=>~~((a+.5)/365.241)+(r>0?1:-1)});return y=x,y}var de=ie();const O=$(de);function oe({title:u,show:x,formValue:a,onOk:r,onCancel:n}){const l=re({defaultValues:a}),[f,N]=g.useState("");g.useEffect(()=>{l.reset(a),N("")},[a,l]);const v=l.handleSubmit(t=>{if(t.password!==f){l.setError("password",{message:"رمز عبور و تأیید رمز عبور باید یکسان باشند"});return}r(t)});return e.jsx(_,{open:x,onOpenChange:t=>!t&&n(),children:e.jsxs(G,{children:[e.jsx(U,{children:e.jsx(V,{children:u})}),e.jsx(X,{...l,children:e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsx(p,{control:l.control,name:"username",rules:{required:"نام کاربری الزامی است"},render:({field:t})=>e.jsxs(o,{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{className:"text-right",children:"نام کاربری"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(m,{children:e.jsx(b,{...t})}),e.jsx(j,{})]})]})}),e.jsx(p,{control:l.control,name:"password",rules:{required:"رمز عبور الزامی است",minLength:{value:6,message:"رمز عبور باید حداقل ۶ کاراکتر باشد"}},render:({field:t})=>e.jsxs(o,{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{className:"text-right",children:"رمز عبور"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(m,{children:e.jsx(b,{type:"password",...t})}),e.jsx(j,{})]})]})}),e.jsxs(o,{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{className:"text-right",children:"تأیید رمز عبور"}),e.jsx("div",{className:"col-span-3",children:e.jsx(m,{children:e.jsx(b,{type:"password",value:f,onChange:t=>N(t.target.value)})})})]}),e.jsx(p,{control:l.control,name:"role",rules:{required:"نقش کاربر الزامی است"},render:({field:t})=>e.jsxs(o,{className:"grid grid-cols-4 items-center min-w-40 gap-4",children:[e.jsx(c,{className:"text-right",children:"اعطای نقش"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(m,{children:e.jsxs(ee,{onValueChange:t.onChange,value:t.value||"",children:[e.jsx(ae,{children:e.jsx(se,{placeholder:"نقش را انتخاب کنید"})}),e.jsxs(te,{children:[e.jsx(I,{value:"admin",children:"مدیر"}),e.jsx(I,{value:"user",children:"کاربر"}),e.jsx(I,{value:"editor",children:"ویرایشگر"})]})]})}),e.jsx(j,{})]})]})}),e.jsx(p,{control:l.control,name:"status",rules:{required:"وضعیت الزامی است"},render:({field:t})=>e.jsxs(o,{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{className:"text-right",children:"وضعیت"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(m,{children:e.jsxs(Z,{onValueChange:i=>t.onChange(Number(i)),value:String(t.value),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{value:String(h.ENABLE),id:"enable"}),e.jsx(R,{htmlFor:"enable",children:"فعال"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{value:String(h.DISABLE),id:"disable"}),e.jsx(R,{htmlFor:"disable",children:"غیرفعال"})]})]})}),e.jsx(j,{})]})]})}),e.jsxs("div",{className:"w-full grid grid-cols-2",children:[e.jsx(p,{control:l.control,name:"startDate",rules:{required:"تاریخ شروع الزامی است"},render:({field:t})=>e.jsxs(o,{className:"grid col-span-1 grid-cols-4 items-center gap-4",children:[e.jsx(c,{className:"text-right col-span-4",children:"تاریخ شروع فعالیت"}),e.jsxs("div",{className:"col-span-4",children:[e.jsx(m,{children:e.jsx(M,{value:t.value,onChange:i=>t.onChange(i?.toString()||""),calendar:O,locale:Y,format:"YYYY/MM/DD",inputClass:"w-full border border-gray-300 rounded-md p-2"})}),e.jsx(j,{})]})]})}),e.jsx(p,{control:l.control,name:"endDate",rules:{required:"تاریخ پایان الزامی است"},render:({field:t})=>e.jsxs(o,{className:"grid col-span-1 grid-cols-4 items-center gap-4",children:[e.jsx(c,{className:"text-right col-span-4",children:"تاریخ پایان فعالیت"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(m,{children:e.jsx(M,{value:t.value,onChange:i=>t.onChange(i?.toString()||""),calendar:O,locale:Y,format:"YYYY/MM/DD",inputClass:"w-full border border-gray-300 rounded-md p-2"})}),e.jsx(j,{})]})]})})]})]})}),e.jsxs(K,{className:"pt-4 flex justify-end gap-2",children:[e.jsx(w,{className:"bg-error hover:bg-error text-white",onClick:n,children:"انصراف"}),e.jsx(w,{className:"bg-primary text-white",onClick:v,children:"ذخیره"})]})]})})}const{Option:k}=S,T={id:"",firstName:"",lastName:"",nationalId:"",personnelNumber:"",phoneNumber:"",username:"",password:"",status:h.ENABLE,startDate:"",endDate:""};function ce(){const{can:u}=W(),{operationList:x,resourceList:a}=J,[r,n]=g.useState(""),[l,f]=g.useState("name"),[N,v]=g.useState("name"),[t,i]=g.useState({formValue:{...T},title:"ساخت ادمین جدید",show:!1,onOk:()=>{i(s=>({...s,show:!1}))},onCancel:()=>{i(s=>({...s,show:!1}))}}),C=[{id:"1",firstName:"علی",lastName:"محمدی",nationalId:"1234567890",personnelNumber:"P001",phoneNumber:"09123456789",username:"ali.mohammadi",password:"",status:h.ENABLE,startDate:"1404/01/01",endDate:"1405/12/29"},{id:"2",firstName:"حسین",lastName:"احمدی",nationalId:"0987654321",personnelNumber:"P002",phoneNumber:"09198765432",username:"hossein.ahmadi",password:"",status:h.DISABLE,startDate:"1404/02/01",endDate:"1405/11/30"}],D=s=>{i(d=>({...d,show:!0,title:"ثبت نام کاربری",formValue:{...T,id:s.id,firstName:s.firstName,lastName:s.lastName,nationalId:s.nationalId,personnelNumber:s.personnelNumber,phoneNumber:s.phoneNumber}}))},q=[{title:"نام",dataIndex:"firstName",width:150},{title:"نام خانوادگی",dataIndex:"lastName",width:150},{title:"کد ملی",dataIndex:"nationalId",width:150},{title:"شماره پرسنلی",dataIndex:"personnelNumber",width:150},{title:"شماره تماس",dataIndex:"phoneNumber",width:150},{title:"عملیات",key:"operation",align:"center",width:200,render:(s,d)=>e.jsx("div",{className:"flex w-full justify-center gap-2",children:e.jsx(w,{className:"bg-chart3 text-white font-bold",onClick:()=>D(d),children:"ثبت نام کاربری"})})}],H=[{title:"نام",dataIndex:"firstName",width:150},{title:"نام خانوادگی",dataIndex:"lastName",width:150},{title:"کد ملی",dataIndex:"nationalId",width:150},{title:"شماره پرسنلی",dataIndex:"personnelNumber",width:150},{title:"شماره تماس",dataIndex:"phoneNumber",width:150},{title:" نام کاربری",dataIndex:"username",width:150},{title:"وضعیت",dataIndex:"status",align:"center",width:120,render:s=>e.jsx(Q,{variant:s===h.DISABLE?"error":"success",children:s===h.DISABLE?"غیرفعال":"فعال"})},{title:"عملیات",key:"operation",align:"center",width:200,render:(s,d)=>e.jsx("div",{className:"flex w-full justify-center gap-2",children:e.jsx(w,{onClick:()=>D(d),className:"bg-chart3 text-white font-bold hover:bg-primary cursor-pointer ",children:"ویرایش"})})}];return e.jsxs(z,{children:[e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:" اطلاعات پرسنل"}),u(a.CREDITBUDGET,x.SEARCH)&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center border p-3 rounded-md bg-card text-card-foreground  w-full sm:w-auto",children:[e.jsx("div",{className:"flex gap-1 items-center justify-start",children:e.jsx(F,{placeholder:"فیلد مورد نظر خود را انتخاب فرمائید",value:r,onChange:s=>n(s.target.value),allowClear:!0,className:"w-full sm:w-52",style:{minWidth:"260px"}})}),e.jsx(S,{value:l,onChange:s=>f(s),className:"w-40",children:le.map((s,d)=>e.jsx(k,{value:s.value,children:s.title},d))})]})]})}),e.jsx(L,{className:"max-h-[460px] overflow-auto",children:e.jsx(A,{rowKey:"id",size:"small",scroll:{x:"max-content"},pagination:!1,columns:q,dataSource:C})}),e.jsx(E,{className:"mt-8 border-t border-t-primary/50  pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:"مدیریت ادمین‌ها"}),u(a.CREDITBUDGET,x.SEARCH)&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center border p-3 rounded-md bg-card text-card-foreground   w-full sm:w-auto",children:[e.jsx("div",{className:"flex gap-1 items-center justify-start ",children:e.jsx(F,{placeholder:"فیلد مورد نظر خود را انتخاب فرمائید",value:r,onChange:s=>n(s.target.value),className:"w-full sm:w-64 ",style:{minWidth:"260px"}})}),e.jsx(S,{value:N,onChange:s=>v(s),className:"w-40",children:ne.map((s,d)=>e.jsx(k,{value:s.value,children:s.title},d))})]})]})}),e.jsx(L,{children:e.jsx(A,{rowKey:"id",size:"small",scroll:{x:"max-content"},pagination:!1,columns:H,dataSource:C})}),e.jsx(oe,{...t})]})}const Ie=()=>e.jsx(ce,{});export{Ie as default};
