import{j as s,D as I,E,F as k,G as q,B as h}from"./index-Bt7t-uRm.js";import{u as A,A as b}from"./use-request-B4L2sB-F.js";import{r}from"./vendor-core-CiUIJZ_7.js";import{u as B,C as j}from"./index.esm-BGUB25Qb.js";import{e as l,I as y}from"./vendor-ui-DnFwFa5O.js";import"./vendor-utils-IiNHtr66.js";function O({title:N,show:c,formValue:a,onOk:v,onCancel:d}){const i=A(),n=i.useGetData("api/yegan",{Authorization:b}),o=i.useGetData("api/person",{Authorization:b}),[D,S]=r.useState([]),[P,_]=r.useState([]);r.useEffect(()=>{n.fetchData(),o.fetchData()},[c]),r.useEffect(()=>{const e=n.data;e?.success&&e.data&&S(e.data);const t=o.data;t?.success&&t.data&&_(t.data)},[n.data,o.data]);const{control:u,handleSubmit:w,reset:m}=B({defaultValues:a}),[x,p]=r.useState(void 0),[f,g]=r.useState(void 0);r.useEffect(()=>{m(a),a.yegan_id&&p(a.yegan_id),a.person_id&&g(a.person_id)},[a,m]);const C=e=>{const t={...e,yegan_id:x?Number(x):null,person_id:f?Number(f):null};v(t,a.id?"edit":"add")};return s.jsx(I,{open:c,onOpenChange:e=>!e&&d(),children:s.jsxs(E,{children:[s.jsx(k,{children:s.jsx(q,{children:N})}),s.jsxs("form",{onSubmit:w(C),className:"space-y-4",children:[s.jsxs(l.Item,{className:"flex flex-col gap-2",required:!0,children:[s.jsx("label",{className:"text-sm font-medium",children:"شماره حساب"}),s.jsx(j,{name:"number_hesab",control:u,render:({field:e})=>s.jsx(y,{...e,value:e.value||"",className:"w-full"})})]}),s.jsxs(l.Item,{className:"flex flex-col gap-2",required:!0,children:[s.jsx("label",{className:"text-sm font-medium",children:"عنوان حساب"}),s.jsx(j,{name:"onvan_hesab",control:u,render:({field:e})=>s.jsx(y,{...e,value:e.value||"",className:"w-full"})})]}),s.jsxs(l.Item,{className:"flex flex-col gap-2",required:!0,children:[s.jsx("label",{className:"text-sm font-medium",children:"انتخاب عامل خرید "}),s.jsx("select",{className:"w-full flex flex-col gap-2 px-2 py-1 border border-accent rounded-b-md",onChange:e=>g(e.target.value),children:P.map((e,t)=>s.jsx("option",{className:"w-full bg-background text-accent-foreground flex items-center justify-start px-2 py-1",value:e.id,children:e.name+"  "+e.family},t))})]}),s.jsxs(l.Item,{className:"flex flex-col gap-2",required:!0,children:[s.jsx("label",{className:"text-sm font-medium",children:"انتخاب یگان "}),s.jsx("select",{className:"w-full flex flex-col gap-2 px-2 py-1 border border-accent rounded-b-md",onChange:e=>p(e.target.value),children:D.map((e,t)=>s.jsx("option",{className:"w-full bg-background text-accent-foreground flex items-center justify-start px-2 py-1",value:e.id,children:"  نام یگان » "+e.name+" کد یگان » "+e.code},t))})]}),s.jsxs(l.Item,{className:"flex justify-end gap-4 mt-4",children:[s.jsx(h,{type:"button",className:"px-5 py-2 rounded-md border-gray-300 text-white bg-error/50 hover:bg-error",onClick:d,children:"انصراف"}),s.jsx(h,{type:"submit",className:"px-5 py-2 rounded-md text-white bg-success/70 hover:bg-success",children:a?.id?"ویرایش":"افزودن"})]})]})]})})}export{O as default};
