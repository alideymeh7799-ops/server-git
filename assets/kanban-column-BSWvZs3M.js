import{aN as K,aO as P,j as e,O as z,Q as B,B as y,I as l,R as V,U as A,q as f}from"./index-akJh1a2u.js";import"./vendor-utils-IiNHtr66.js";import{I as g}from"./input-DybMe5F1.js";import{d as F,C as q,S as G,v as H,K as J}from"./kanban-task-qbIgSnRs.js";import{r as i}from"./vendor-core-CiUIJZ_7.js";import{T as Q}from"./task-detail-BkBMVkij.js";function U(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,r)}function W(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,r)}var X=typeof window<"u",Y=X?window:null,k=function(t){return!!t.addEventListener},v=function(t){return!!t.on},Z=function(t,r,n,a){n===void 0&&(n=Y),i.useEffect(function(){if(r&&n)return k(n)?U(n,t,r,a):v(n)&&n.on(t,r,a),function(){k(n)?W(n,t,r,a):v(n)&&n.off(t,r,a)}},[t,r,n,JSON.stringify(a)])};function $({id:t,column:r,tasks:n,createTask:a,clearColumn:p,deleteColumn:m,renameColumn:j,isDragging:b}){const{themeMode:T}=K(),{attributes:w,listeners:C,setNodeRef:N,transform:S,transition:E}=F({id:t}),I={transform:q.Transform.toString(S),transition:E,height:"100%",padding:"16px",borderRadius:"16px",backgroundColor:T===P.Light?"rgb(244, 246, 248)":"rgba(145, 158, 171, 0.12)",opacity:b?.5:1},O=[{key:"1",label:e.jsxs("div",{className:"flex items-center text-gray",onClick:()=>{u(!0)},onKeyDown:s=>{s.key==="Enter"&&u(!0)},children:[e.jsx(l,{icon:"solar:pen-bold"}),e.jsx("span",{className:"ml-2",children:"rename"})]})},{key:"2",label:e.jsxs("div",{className:"flex items-center text-gray",onClick:()=>p(r.id),onKeyDown:s=>{s.key==="Enter"&&p(r.id)},children:[e.jsx(l,{icon:"solar:eraser-bold"}),e.jsx("span",{className:"ml-2",children:"clear"})]})},{key:"3",label:e.jsxs("div",{className:"flex items-center text-warning",onClick:()=>m(r.id),onKeyDown:s=>{s.key==="Enter"&&m(r.id)},children:[e.jsx(l,{icon:"solar:trash-bin-trash-bold"}),e.jsx("span",{className:"ml-2",children:"delete"})]})}],[L,x]=i.useState(!1),c=i.useRef(null);Z("click",s=>{if(c.current&&!c.current.contains(s.target)){const o=c.current.value;o&&a(r.id,{id:f.string.uuid(),title:o,reporter:f.image.avatarGitHub(),priority:f.helpers.enumValue(Q)}),x(!1)}if(d.current&&!d.current.contains(s.target)){const o=d.current.value;o&&j({...r,title:o}),u(!1)}});const[R,u]=i.useState(!1),d=i.useRef(null),[D,h]=i.useState(!1),M=s=>{h(!1),s.domEvent.stopPropagation()};return e.jsxs("div",{ref:N,style:I,children:[e.jsxs("header",{...w,...C,className:"mb-4 flex select-none items-center justify-between text-base font-semibold",children:[R?e.jsx(g,{ref:d,autoFocus:!0}):r.title,e.jsxs(z,{open:D,onOpenChange:h,children:[e.jsx(B,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",className:"text-gray!",children:e.jsx(l,{icon:"dashicons:ellipsis"})})}),e.jsx(V,{align:"end",children:O?.map(s=>s&&"key"in s&&"label"in s?e.jsx(A,{onClick:()=>M({key:s.key}),children:s.label},s.key):null)})]})]}),e.jsx(G,{items:n.map(s=>s.id),strategy:H,children:e.jsx("div",{className:"min-h-[10px]",children:n.map(s=>e.jsx(J,{id:s.id,task:s},s.id))})}),e.jsx("footer",{className:"w-[248px]",children:L?e.jsx(g,{ref:c,placeholder:"Task Name",autoFocus:!0}):e.jsxs(y,{onClick:s=>{s.stopPropagation(),x(!0)},className:"flex! items-center justify-center text-xs! font-medium! w-full",children:[e.jsx(l,{icon:"carbon:add",size:20}),e.jsx("span",{children:"Add Task"})]})})]})}const ie=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{$ as K,ie as k,Z as u};
